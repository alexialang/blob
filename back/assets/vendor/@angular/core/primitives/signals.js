/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/@angular/core@19.2.9/fesm2022/primitives/signals.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
/**
 * @license Angular v19.2.9
 * (c) 2010-2025 Google LLC. https://angular.io/
 * License: MIT
 */
function e(e,n){return Object.is(e,n)}let n=null,o=!1,r=1;const u=Symbol("SIGNAL");function t(e){const o=n;return n=e,o}function c(){return n}function i(){return o}function l(e){return void 0!==e[u]}const d={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function s(e){if(o)throw new Error("undefined"!=typeof ngDevMode&&ngDevMode?"Assertion error: signal read during notification phase":"");if(null===n)return;n.consumerOnSignalRead(e);const r=n.nextProducerIndex++;if(w(n),r<n.producerNode.length&&n.producerNode[r]!==e&&O(n)){I(n.producerNode[r],n.producerIndexOfThis[r])}n.producerNode[r]!==e&&(n.producerNode[r]=e,n.producerIndexOfThis[r]=O(n)?C(e,n,r):0),n.producerLastReadVersion[r]=e.version}function a(){r++}function f(e){O(e)&&!e.dirty||(e.dirty||e.lastCleanEpoch!==r)&&(e.producerMustRecompute(e)||g(e)?(e.producerRecomputeValue(e),m(e)):m(e))}function p(e){if(void 0===e.liveConsumerNode)return;const n=o;o=!0;try{for(const n of e.liveConsumerNode)n.dirty||h(n)}finally{o=n}}function v(){return!1!==n?.consumerAllowSignalWrites}function h(e){e.dirty=!0,p(e),e.consumerMarkedDirty?.(e)}function m(e){e.dirty=!1,e.lastCleanEpoch=r}function N(e){return e&&(e.nextProducerIndex=0),t(e)}function y(e,n){if(t(n),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(O(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)I(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function g(e){w(e);for(let n=0;n<e.producerNode.length;n++){const o=e.producerNode[n],r=e.producerLastReadVersion[n];if(r!==o.version)return!0;if(f(o),r!==o.version)return!0}return!1}function x(e){if(w(e),O(e))for(let n=0;n<e.producerNode.length;n++)I(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function C(e,n,o){if(R(e),0===e.liveConsumerNode.length&&T(e))for(let n=0;n<e.producerNode.length;n++)e.producerIndexOfThis[n]=C(e.producerNode[n],e,n);return e.liveConsumerIndexOfThis.push(o),e.liveConsumerNode.push(n)-1}function I(e,n){if(R(e),"undefined"!=typeof ngDevMode&&ngDevMode&&n>=e.liveConsumerNode.length)throw new Error(`Assertion error: active consumer index ${n} is out of bounds of ${e.liveConsumerNode.length} consumers)`);if(1===e.liveConsumerNode.length&&T(e))for(let n=0;n<e.producerNode.length;n++)I(e.producerNode[n],e.producerIndexOfThis[n]);const o=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[o],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[o],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){const o=e.liveConsumerIndexOfThis[n],r=e.liveConsumerNode[n];w(r),r.producerIndexOfThis[o]=n}}function O(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function w(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function R(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function T(e){return void 0!==e.producerNode}function S(e,n){const o=Object.create(L);o.computation=e,void 0!==n&&(o.equal=n);const r=()=>{if(f(o),s(o),o.value===M)throw o.error;return o.value};return r[u]=o,r}const V=Symbol("UNSET"),E=Symbol("COMPUTING"),M=Symbol("ERRORED"),L=(()=>({...d,value:V,dirty:!0,error:null,equal:e,kind:"computed",producerMustRecompute:e=>e.value===V||e.value===E,producerRecomputeValue(e){if(e.value===E)throw new Error("Detected cycle in computations.");const n=e.value;e.value=E;const o=N(e);let r,u=!1;try{r=e.computation(),t(null),u=n!==V&&n!==M&&r!==M&&e.equal(n,r)}catch(n){r=M,e.error=n}finally{y(e,o)}u?e.value=n:(e.value=r,e.version++)}}))();let b=function(){throw new Error};function A(e){b(e)}function D(e){b=e}let k=null;function q(e,n){const o=Object.create(G);o.value=e,void 0!==n&&(o.equal=n);const r=()=>(s(o),o.value);return r[u]=o,r}function F(e){const n=k;return k=e,n}function P(e,n){v()||A(e),e.equal(e.value,n)||(e.value=n,function(e){e.version++,a(),p(e),k?.()}(e))}function j(e,n){v()||A(e),P(e,n(e.value))}function W(){k?.()}const G=(()=>({...d,equal:e,value:void 0,kind:"signal"}))();function U(e,n,o){const r=Object.create(B);r.source=e,r.computation=n,null!=o&&(r.equal=o);const t=()=>{if(f(r),s(r),r.value===M)throw r.error;return r.value};return t[u]=r,t}function $(e,n){f(e),P(e,n),m(e)}function z(e,n){f(e),j(e,n),m(e)}const B=(()=>({...d,value:V,dirty:!0,error:null,equal:e,kind:"linkedSignal",producerMustRecompute:e=>e.value===V||e.value===E,producerRecomputeValue(e){if(e.value===E)throw new Error("Detected cycle in computations.");const n=e.value;e.value=E;const o=N(e);let r;try{const o=e.source(),u=n===V||n===M?void 0:{source:e.sourceValue,value:n};r=e.computation(o,u),e.sourceValue=o}catch(n){r=M,e.error=n}finally{y(e,o)}n!==V&&r!==M&&e.equal(n,r)?e.value=n:(e.value=r,e.version++)}}))();function H(e){}function J(e){const n=t(null);try{return e()}finally{t(n)}}
/**
 * @license Angular v19.2.9
 * (c) 2010-2025 Google LLC. https://angular.io/
 * License: MIT
 */function K(e,n,o){const r=Object.create(X);o&&(r.consumerAllowSignalWrites=!0),r.fn=e,r.schedule=n;const t=e=>{r.cleanupFn=e};return r.ref={notify:()=>h(r),run:()=>{if(null===r.fn)return;if(i())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!g(r))return;r.hasRun=!0;const e=N(r);try{r.cleanupFn(),r.cleanupFn=Q,r.fn(t)}finally{y(r,e)}},cleanup:()=>r.cleanupFn(),destroy:()=>function(e){(function(e){return null===e.fn&&null===e.schedule})(e)||(x(e),e.cleanupFn(),e.fn=null,e.schedule=null,e.cleanupFn=Q)}(r),[u]:r},r.ref}const Q=()=>{},X=(()=>({...d,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{null!==e.schedule&&e.schedule(e.ref)},hasRun:!1,cleanupFn:Q}))();export{d as REACTIVE_NODE,u as SIGNAL,G as SIGNAL_NODE,y as consumerAfterComputation,N as consumerBeforeComputation,x as consumerDestroy,h as consumerMarkDirty,g as consumerPollProducersForChange,S as createComputed,U as createLinkedSignal,q as createSignal,K as createWatch,e as defaultEquals,c as getActiveConsumer,i as isInNotificationPhase,l as isReactive,$ as linkedSignalSetFn,z as linkedSignalUpdateFn,s as producerAccessed,a as producerIncrementEpoch,m as producerMarkClean,p as producerNotifyConsumers,f as producerUpdateValueVersion,v as producerUpdatesAllowed,W as runPostSignalSetFn,t as setActiveConsumer,H as setAlternateWeakRefImpl,F as setPostSignalSetFn,D as setThrowInvalidWriteToSignalError,P as signalSetFn,j as signalUpdateFn,J as untracked};export default null;
