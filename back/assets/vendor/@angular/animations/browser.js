/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/@angular/animations@19.2.9/fesm2022/browser.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as e from"@angular/core";import{ÉµRuntimeError as t,Injectable as n}from"@angular/core";
/**
 * @license Angular v19.2.9
 * (c) 2010-2025 Google LLC. https://angular.io/
 * License: MIT
 */var s;!function(e){e[e.State=0]="State",e[e.Transition=1]="Transition",e[e.Sequence=2]="Sequence",e[e.Group=3]="Group",e[e.Animate=4]="Animate",e[e.Keyframes=5]="Keyframes",e[e.Style=6]="Style",e[e.Trigger=7]="Trigger",e[e.Reference=8]="Reference",e[e.AnimateChild=9]="AnimateChild",e[e.AnimateRef=10]="AnimateRef",e[e.Query=11]="Query",e[e.Stagger=12]="Stagger"}(s||(s={}));const i="*";function r(e){return{type:s.Style,styles:e,offset:null}}class o{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach((e=>e())),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask((()=>this._onFinish()))}_onStart(){this._onStartFns.forEach((e=>e())),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach((e=>e())),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((e=>e())),t.length=0}}class a{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,n=0,s=0;const i=this.players.length;0==i?queueMicrotask((()=>this._onFinish())):this.players.forEach((e=>{e.onDone((()=>{++t==i&&this._onFinish()})),e.onDestroy((()=>{++n==i&&this._onDestroy()})),e.onStart((()=>{++s==i&&this._onStart()}))})),this.totalTime=this.players.reduce(((e,t)=>Math.max(e,t.totalTime)),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach((e=>e())),this._onDoneFns=[])}init(){this.players.forEach((e=>e.init()))}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach((e=>e())),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach((e=>e.play()))}pause(){this.players.forEach((e=>e.pause()))}restart(){this.players.forEach((e=>e.restart()))}finish(){this._onFinish(),this.players.forEach((e=>e.finish()))}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach((e=>e.destroy())),this._onDestroyFns.forEach((e=>e())),this._onDestroyFns=[])}reset(){this.players.forEach((e=>e.reset())),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach((e=>{const n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)}))}getPosition(){const e=this.players.reduce(((e,t)=>null===e||t.totalTime>e.totalTime?t:e),null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach((e=>{e.beforeDestroy&&e.beforeDestroy()}))}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((e=>e())),t.length=0}}const l="\n - ";
/**
 * @license Angular v19.2.9
 * (c) 2010-2025 Google LLC. https://angular.io/
 * License: MIT
 */function h(e){return new t(3e3,ngDevMode&&`The provided timing value "${e}" is invalid.`)}const c=new Set(["-moz-outline-radius","-moz-outline-radius-bottomleft","-moz-outline-radius-bottomright","-moz-outline-radius-topleft","-moz-outline-radius-topright","-ms-grid-columns","-ms-grid-rows","-webkit-line-clamp","-webkit-text-fill-color","-webkit-text-stroke","-webkit-text-stroke-color","accent-color","all","backdrop-filter","background","background-color","background-position","background-size","block-size","border","border-block-end","border-block-end-color","border-block-end-width","border-block-start","border-block-start-color","border-block-start-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-width","border-color","border-end-end-radius","border-end-start-radius","border-image-outset","border-image-slice","border-image-width","border-inline-end","border-inline-end-color","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-width","border-left","border-left-color","border-left-width","border-radius","border-right","border-right-color","border-right-width","border-start-end-radius","border-start-start-radius","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-width","border-width","bottom","box-shadow","caret-color","clip","clip-path","color","column-count","column-gap","column-rule","column-rule-color","column-rule-width","column-width","columns","filter","flex","flex-basis","flex-grow","flex-shrink","font","font-size","font-size-adjust","font-stretch","font-variation-settings","font-weight","gap","grid-column-gap","grid-gap","grid-row-gap","grid-template-columns","grid-template-rows","height","inline-size","input-security","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","left","letter-spacing","line-clamp","line-height","margin","margin-block-end","margin-block-start","margin-bottom","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","mask","mask-border","mask-position","mask-size","max-block-size","max-height","max-inline-size","max-lines","max-width","min-block-size","min-height","min-inline-size","min-width","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","outline","outline-color","outline-offset","outline-width","padding","padding-block-end","padding-block-start","padding-bottom","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","perspective","perspective-origin","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-coordinate","scroll-snap-destination","scrollbar-color","shape-image-threshold","shape-margin","shape-outside","tab-size","text-decoration","text-decoration-color","text-decoration-thickness","text-emphasis","text-emphasis-color","text-indent","text-shadow","text-underline-offset","top","transform","transform-origin","translate","vertical-align","visibility","width","word-spacing","z-index","zoom"]);function u(e){switch(e.length){case 0:return new o;case 1:return e[0];default:return new a(e)}}function d(e,n,s=new Map,r=new Map){const o=[],a=[];let h=-1,c=null;if(n.forEach((t=>{const n=t.get("offset"),l=n==h,u=l&&c||new Map;t.forEach(((t,n)=>{let a=n,l=t;if("offset"!==n)switch(a=e.normalizePropertyName(a,o),l){case"!":l=s.get(n);break;case i:l=r.get(n);break;default:l=e.normalizeStyleValue(n,a,l,o)}u.set(a,l)})),l||a.push(u),c=u,h=n})),o.length)throw function(e){return new t(3502,ngDevMode&&`Unable to animate due to the following errors:${l}${e.map((e=>e.message)).join(l)}`)}(o);return a}function m(e,t,n,s){switch(t){case"start":e.onStart((()=>s(n&&p(n,"start",e))));break;case"done":e.onDone((()=>s(n&&p(n,"done",e))));break;case"destroy":e.onDestroy((()=>s(n&&p(n,"destroy",e))))}}function p(e,t,n){const s=n.totalTime,i=!!n.disabled,r=y(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==s?e.totalTime:s,i),o=e._data;return null!=o&&(r._data=o),r}function y(e,t,n,s,i="",r=0,o){return{element:e,triggerName:t,fromState:n,toState:s,phaseName:i,totalTime:r,disabled:!!o}}function f(e,t,n){let s=e.get(t);return s||e.set(t,s=n),s}function g(e){const t=e.indexOf(":");return[e.substring(1,t),e.slice(t+1)]}const _=(()=>"undefined"==typeof document?null:document.documentElement)();function S(e){const t=e.parentNode||e.host||null;return t===_?null:t}let v=null,b=!1;function w(e){v||(v=function(){if("undefined"!=typeof document)return document.body;return null}()||{},b=!!v.style&&"WebkitAppearance"in v.style);let t=!0;if(v.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in v.style,!t&&b)){t="Webkit"+e.charAt(0).toUpperCase()+e.slice(1)in v.style}return t}function E(e){return c.has(e)}function T(e,t){for(;t;){if(t===e)return!0;t=S(t)}return!1}function k(e,t,n){if(n)return Array.from(e.querySelectorAll(t));const s=e.querySelector(t);return s?[s]:[]}const D="ng-enter",A="ng-leave",M="ng-trigger",P=".ng-trigger",F="ng-animating",C=".ng-animating";function N(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:x(parseFloat(t[1]),t[2])}function x(e,t){return"s"===t?1e3*e:e}function R(e,n,s){return e.hasOwnProperty("duration")?e:function(e,n,s){const i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;let r,o=0,a="";if("string"==typeof e){const t=e.match(i);if(null===t)return n.push(h(e)),{duration:0,delay:0,easing:""};r=x(parseFloat(t[1]),t[2]);const s=t[3];null!=s&&(o=x(parseFloat(s),t[4]));const l=t[5];l&&(a=l)}else r=e;if(!s){let s=!1,i=n.length;r<0&&(n.push(new t(3100,ngDevMode&&"Duration values below 0 are not allowed for this animation step.")),s=!0),o<0&&(n.push(new t(3101,ngDevMode&&"Delay values below 0 are not allowed for this animation step.")),s=!0),s&&n.splice(i,0,h(e))}return{duration:r,delay:o,easing:a}}(e,n,s)}function z(e){return e.length?e[0]instanceof Map?e:e.map((e=>new Map(Object.entries(e)))):[]}function I(e){return Array.isArray(e)?new Map(...e):new Map(e)}function q(e,t,n){t.forEach(((t,s)=>{const i=W(s);n&&!n.has(s)&&n.set(s,e.style[i]),e.style[i]=t}))}function L(e,t){t.forEach(((t,n)=>{const s=W(n);e.style[s]=""}))}function K(e){return Array.isArray(e)?1==e.length?e[0]:function(e,t=null){return{type:s.Sequence,steps:e,options:t}}(e):e}function B(e,n,s){const i=n.params||{},r=O(e);r.length&&r.forEach((e=>{i.hasOwnProperty(e)||s.push(function(e){return new t(3001,ngDevMode&&`Unable to resolve the local animation param ${e} in the given list of values`)}(e))}))}const Q=new RegExp("{{\\s*(.+?)\\s*}}","g");function O(e){let t=[];if("string"==typeof e){let n;for(;n=Q.exec(e);)t.push(n[1]);Q.lastIndex=0}return t}function $(e,n,s){const i=`${e}`,r=i.replace(Q,((e,i)=>{let r=n[i];return null==r&&(s.push(function(e){return new t(3003,ngDevMode&&`Please provide a value for the animation param ${e}`)}(i)),r=""),r.toString()}));return r==i?e:r}const j=/-+([a-z0-9])/g;function W(e){return e.replace(j,((...e)=>e[1].toUpperCase()))}function V(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function U(e,t){return 0===e||0===t}function H(e,n,i){switch(n.type){case s.Trigger:return e.visitTrigger(n,i);case s.State:return e.visitState(n,i);case s.Transition:return e.visitTransition(n,i);case s.Sequence:return e.visitSequence(n,i);case s.Group:return e.visitGroup(n,i);case s.Animate:return e.visitAnimate(n,i);case s.Keyframes:return e.visitKeyframes(n,i);case s.Style:return e.visitStyle(n,i);case s.Reference:return e.visitReference(n,i);case s.AnimateChild:return e.visitAnimateChild(n,i);case s.AnimateRef:return e.visitAnimateRef(n,i);case s.Query:return e.visitQuery(n,i);case s.Stagger:return e.visitStagger(n,i);default:throw r=n.type,new t(3004,ngDevMode&&`Unable to resolve animation metadata node #${r}`)}var r}function G(e,t){return window.getComputedStyle(e)[t]}
/**
 * @license Angular v19.2.9
 * (c) 2010-2025 Google LLC. https://angular.io/
 * License: MIT
 */class Z{validateStyleProperty(e){return w(e)}containsElement(e,t){return T(e,t)}getParentElement(e){return S(e)}query(e,t,n){return k(e,t,n)}computeStyle(e,t,n){return n||""}animate(e,t,n,s,i,r=[],a){return new o(n,s)}static"Éµfac"=e.ÉµÉµngDeclareFactory({minVersion:"12.0.0",version:"19.2.9",ngImport:e,type:Z,deps:[],target:e.ÉµÉµFactoryTarget.Injectable});static"Éµprov"=e.ÉµÉµngDeclareInjectable({minVersion:"12.0.0",version:"19.2.9",ngImport:e,type:Z})}e.ÉµÉµngDeclareClassMetadata({minVersion:"12.0.0",version:"19.2.9",ngImport:e,type:Z,decorators:[{type:n}]});class J{static NOOP=new Z}class X{}class Y{normalizePropertyName(e,t){return e}normalizeStyleValue(e,t,n,s){return n}}const ee=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class te extends X{normalizePropertyName(e,t){return W(e)}normalizeStyleValue(e,n,s,i){let r="";const o=s.toString().trim();if(ee.has(n)&&0!==s&&"0"!==s)if("number"==typeof s)r="px";else{const n=s.match(/^[+-]?[\d\.]+([a-z]*)$/);n&&0==n[1].length&&i.push(function(e,n){return new t(3005,ngDevMode&&`Please provide a CSS unit value for ${e}:${n}`)}(e,s))}return o+r}}function ne(e){const t="\n - ";return`${t}${e.filter(Boolean).map((e=>e)).join(t)}`}const se="*";function ie(e,n){const s=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach((e=>function(e,n,s){if(":"==e[0]){const i=function(e,n){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return n.push(function(e){return new t(3016,ngDevMode&&`The transition alias value "${e}" is not supported`)}(e)),"* => *"}}(e,s);if("function"==typeof i)return void n.push(i);e=i}const i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return s.push((r=e,new t(3015,ngDevMode&&`The provided transition expression "${r}" is not supported`))),n;var r;const o=i[1],a=i[2],l=i[3];n.push(ae(o,l));const h=o==se&&l==se;"<"!=a[0]||h||n.push(ae(l,o));return}(e,s,n))):s.push(e),s}const re=new Set(["true","1"]),oe=new Set(["false","0"]);function ae(e,t){const n=re.has(e)||oe.has(e),s=re.has(t)||oe.has(t);return(i,r)=>{let o=e==se||e==i,a=t==se||t==r;return!o&&n&&"boolean"==typeof i&&(o=i?re.has(e):oe.has(e)),!a&&s&&"boolean"==typeof r&&(a=r?re.has(t):oe.has(t)),o&&a}}const le=":self",he=new RegExp(`s*${le}s*,?`,"g");function ce(e,t,n,s){return new ue(e).build(t,n,s)}class ue{_driver;constructor(e){this._driver=e}build(e,t,n){const s=new de(t);this._resetContextStyleTimingState(s);const i=H(this,K(e),s);return("undefined"==typeof ngDevMode||ngDevMode)&&s.unsupportedCSSPropertiesFound.size&&function(e,t){t.length&&e.push(`The following provided properties are not recognized: ${t.join(", ")}`)}(n,[...s.unsupportedCSSPropertiesFound.keys()]),i}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,n){let i=n.queryCount=0,r=n.depCount=0;const o=[],a=[];return"@"==e.name.charAt(0)&&n.errors.push(new t(3006,ngDevMode&&"animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))")),e.definitions.forEach((e=>{if(this._resetContextStyleTimingState(n),e.type==s.State){const t=e,s=t.name;s.toString().split(/\s*,\s*/).forEach((e=>{t.name=e,o.push(this.visitState(t,n))})),t.name=s}else if(e.type==s.Transition){const t=this.visitTransition(e,n);i+=t.queryCount,r+=t.depCount,a.push(t)}else n.errors.push(new t(3007,ngDevMode&&"only state() and transition() definitions can sit inside of a trigger()"))})),{type:s.Trigger,name:e.name,states:o,transitions:a,queryCount:i,depCount:r,options:null}}visitState(e,n){const i=this.visitStyle(e.styles,n),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach((e=>{e instanceof Map&&e.forEach((e=>{O(e).forEach((e=>{o.hasOwnProperty(e)||s.add(e)}))}))})),s.size&&n.errors.push(function(e,n){return new t(3008,ngDevMode&&`state("${e}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}(e.name,[...s.values()]))}return{type:s.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=H(this,K(e.animation),t),i=ie(e.expr,t.errors);return{type:s.Transition,matchers:i,animation:n,queryCount:t.queryCount,depCount:t.depCount,options:me(e.options)}}visitSequence(e,t){return{type:s.Sequence,steps:e.steps.map((e=>H(this,e,t))),options:me(e.options)}}visitGroup(e,t){const n=t.currentTime;let i=0;const r=e.steps.map((e=>{t.currentTime=n;const s=H(this,e,t);return i=Math.max(i,t.currentTime),s}));return t.currentTime=i,{type:s.Group,steps:r,options:me(e.options)}}visitAnimate(e,t){const n=function(e,t){if(e.hasOwnProperty("duration"))return e;if("number"==typeof e){return pe(R(e,t).duration,0,"")}const n=e;if(n.split(/\s+/).some((e=>"{"==e.charAt(0)&&"{"==e.charAt(1)))){const e=pe(0,0,"");return e.dynamic=!0,e.strValue=n,e}const s=R(n,t);return pe(s.duration,s.delay,s.easing)}(e.timings,t.errors);let i;t.currentAnimateTimings=n;let o=e.styles?e.styles:r({});if(o.type==s.Keyframes)i=this.visitKeyframes(o,t);else{let s=e.styles,o=!1;if(!s){o=!0;const e={};n.easing&&(e.easing=n.easing),s=r(e)}t.currentTime+=n.duration+n.delay;const a=this.visitStyle(s,t);a.isEmptyStep=o,i=a}return t.currentAnimateTimings=null,{type:s.Animate,timings:n,style:i,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,n){const r=[],o=Array.isArray(e.styles)?e.styles:[e.styles];for(let e of o)"string"==typeof e?e===i?r.push(e):n.errors.push((a=e,new t(3002,ngDevMode&&`The provided style string value ${a} is not allowed.`))):r.push(new Map(Object.entries(e)));var a;let l=!1,h=null;return r.forEach((e=>{if(e instanceof Map&&(e.has("easing")&&(h=e.get("easing"),e.delete("easing")),!l))for(let t of e.values())if(t.toString().indexOf("{{")>=0){l=!0;break}})),{type:s.Style,styles:r,easing:h,offset:e.offset,containsDynamicStyles:l,options:null}}_validateStyleAst(e,n){const s=n.currentAnimateTimings;let i=n.currentTime,r=n.currentTime;s&&r>0&&(r-=s.duration+s.delay),e.styles.forEach((e=>{"string"!=typeof e&&e.forEach(((s,o)=>{if(("undefined"==typeof ngDevMode||ngDevMode)&&!this._driver.validateStyleProperty(o))return e.delete(o),void n.unsupportedCSSPropertiesFound.add(o);const a=n.collectedStyles.get(n.currentQuerySelector),l=a.get(o);let h=!0;l&&(r!=i&&r>=l.startTime&&i<=l.endTime&&(n.errors.push(function(e,n,s,i,r){return new t(3010,ngDevMode&&`The CSS property "${e}" that exists between the times of "${n}ms" and "${s}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`)}(o,l.startTime,l.endTime,r,i)),h=!1),r=l.startTime),h&&a.set(o,{startTime:r,endTime:i}),n.options&&B(s,n.options,n.errors)}))}))}visitKeyframes(e,n){const i={type:s.Keyframes,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(new t(3011,ngDevMode&&"keyframes() must be placed inside of a call to animate()")),i;let r=0;const o=[];let a=!1,l=!1,h=0;const c=e.steps.map((e=>{const t=this._makeStyleAst(e,n);let s=null!=t.offset?t.offset:function(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach((e=>{if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}}));else if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}return t}(t.styles),i=0;return null!=s&&(r++,i=t.offset=s),l=l||i<0||i>1,a=a||i<h,h=i,o.push(i),t}));l&&n.errors.push(new t(3012,ngDevMode&&"Please ensure that all keyframe offsets are between 0 and 1")),a&&n.errors.push(new t(3200,ngDevMode&&"Please ensure that all keyframe offsets are in order"));const u=e.steps.length;let d=0;r>0&&r<u?n.errors.push(new t(3202,ngDevMode&&"Not all style() steps within the declared keyframes() contain offsets")):0==r&&(d=1/(u-1));const m=u-1,p=n.currentTime,y=n.currentAnimateTimings,f=y.duration;return c.forEach(((e,t)=>{const s=d>0?t==m?1:d*t:o[t],r=s*f;n.currentTime=p+y.delay+r,y.duration=r,this._validateStyleAst(e,n),e.offset=s,i.styles.push(e)})),i}visitReference(e,t){return{type:s.Reference,animation:H(this,K(e.animation),t),options:me(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:s.AnimateChild,options:me(e.options)}}visitAnimateRef(e,t){return{type:s.AnimateRef,animation:this.visitReference(e.animation,t),options:me(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[r,o]=function(e){const t=!!e.split(/\s*,\s*/).find((e=>e==le));t&&(e=e.replace(he,""));return e=e.replace(/@\*/g,P).replace(/@\w+/g,(e=>P+"-"+e.slice(1))).replace(/:animating/g,C),[e,t]}(e.selector);t.currentQuerySelector=n.length?n+" "+r:r,f(t.collectedStyles,t.currentQuerySelector,new Map);const a=H(this,K(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:s.Query,selector:r,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:me(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(new t(3013,ngDevMode&&"stagger() can only be used inside of query()"));const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:R(e.timings,n.errors,!0);return{type:s.Stagger,animation:H(this,K(e.animation),n),timings:i,options:null}}}class de{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}}function me(e){var t;return e?(e={...e}).params&&(e.params=(t=e.params)?{...t}:null):e={},e}function pe(e,t,n){return{duration:e,delay:t,easing:n}}function ye(e,t,n,s,i,r,o=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:s,duration:i,delay:r,totalTime:i+r,easing:o,subTimeline:a}}class fe{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const ge=new RegExp(":enter","g"),_e=new RegExp(":leave","g");function Se(e,t,n,s,i,r=new Map,o=new Map,a,l,h=[]){return(new ve).buildKeyframes(e,t,n,s,i,r,o,a,l,h)}class ve{buildKeyframes(e,t,n,s,i,r,o,a,l,h=[]){l=l||new fe;const c=new we(e,t,l,s,i,h,[]);c.options=a;const u=a.delay?N(a.delay):0;c.currentTimeline.delayNextStep(u),c.currentTimeline.setStyles([r],null,c.errors,a),H(this,n,c);const d=c.timelines.filter((e=>e.containsAnimation()));if(d.length&&o.size){let e;for(let n=d.length-1;n>=0;n--){const s=d[n];if(s.element===t){e=s;break}}e&&!e.allowOnlyTimelineStyles()&&e.setStyles([o],null,c.errors,a)}return d.length?d.map((e=>e.buildKeyframes())):[ye(t,[],[],[],0,u,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.get(t.element);if(n){const s=t.createSubContext(e.options),i=t.currentTimeline.currentTime,r=this._visitSubInstructions(n,s,s.options);i!=r&&t.transformIntoNewTimeline(r)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,n){for(const s of e){const e=s?.delay;if(e){const i="number"==typeof e?e:N($(e,s?.params??{},t.errors));n.delayNextStep(i)}}}_visitSubInstructions(e,t,n){let s=t.currentTimeline.currentTime;const i=null!=n.duration?N(n.duration):null,r=null!=n.delay?N(n.delay):null;return 0!==i&&e.forEach((e=>{const n=t.appendInstructionToTimeline(e,i,r);s=Math.max(s,n.duration+n.delay)})),s}visitReference(e,t){t.updateOptions(e.options,!0),H(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let i=t;const r=e.options;if(r&&(r.params||r.delay)&&(i=t.createSubContext(r),i.transformIntoNewTimeline(),null!=r.delay)){i.previousNode.type==s.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=be);const e=N(r.delay);i.delayNextStep(e)}e.steps.length&&(e.steps.forEach((e=>H(this,e,i))),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>n&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let s=t.currentTimeline.currentTime;const i=e.options&&e.options.delay?N(e.options.delay):0;e.steps.forEach((r=>{const o=t.createSubContext(e.options);i&&o.delayNextStep(i),H(this,r,o),s=Math.max(s,o.currentTimeline.currentTime),n.push(o.currentTimeline)})),n.forEach((e=>t.currentTimeline.mergeTimelineCollectedStyles(e))),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return R(t.params?$(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),i.snapshotCurrentStyles());const r=e.style;r.type==s.Keyframes?this.visitKeyframes(r,t):(t.incrementTime(n.duration),this.visitStyle(r,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,s=t.currentAnimateTimings;!s&&n.hasCurrentStyleProperties()&&n.forwardFrame();const i=s&&s.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(i):n.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,s=t.currentTimeline.duration,i=n.duration,r=t.createSubContext().currentTimeline;r.easing=n.easing,e.styles.forEach((e=>{const n=e.offset||0;r.forwardTime(n*i),r.setStyles(e.styles,e.easing,t.errors,t.options),r.applyStylesToKeyframe()})),t.currentTimeline.mergeTimelineCollectedStyles(r),t.transformIntoNewTimeline(s+i),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,i=e.options||{},r=i.delay?N(i.delay):0;r&&(t.previousNode.type===s.Style||0==n&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=be);let o=n;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach(((n,s)=>{t.currentQueryIndex=s;const i=t.createSubContext(e.options,n);r&&i.delayNextStep(r),n===t.element&&(l=i.currentTimeline),H(this,e.animation,i),i.currentTimeline.applyStylesToKeyframe();const a=i.currentTimeline.currentTime;o=Math.max(o,a)})),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,s=t.currentTimeline,i=e.timings,r=Math.abs(i.duration),o=r*(t.currentQueryTotal-1);let a=r*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const l=t.currentTimeline;a&&l.delayNextStep(a);const h=l.currentTime;H(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=s.currentTime-h+(s.startTime-n.currentTimeline.startTime)}}const be={};class we{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=be;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,n,s,i,r,o,a){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=s,this._leaveClassName=i,this.errors=r,this.timelines=o,this.currentTimeline=a||new Ee(this._driver,t,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let s=this.options;null!=n.duration&&(s.duration=N(n.duration)),null!=n.delay&&(s.delay=N(n.delay));const i=n.params;if(i){let e=s.params;e||(e=this.options.params={}),Object.keys(i).forEach((n=>{t&&e.hasOwnProperty(n)||(e[n]=$(i[n],e,this.errors))}))}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach((e=>{n[e]=t[e]}))}}return e}createSubContext(e=null,t,n){const s=t||this.element,i=new we(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(e),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(e){return this.previousNode=be,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const s={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},i=new Te(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(i),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,s,i,r,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(ge,"."+this._enterClassName)).replace(_e,"."+this._leaveClassName);const t=1!=s;let n=this._driver.query(this.element,e,t);0!==s&&(n=s<0?n.slice(n.length+s,n.length):n.slice(0,s)),a.push(...n)}return r||0!=a.length||o.push(function(e){return new t(3014,ngDevMode&&`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`)}(n)),a}}class Ee{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,n,s){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=s,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Ee(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[e,t]of this._globalTimelineStyles)this._backFill.set(e,t||i),this._currentKeyframe.set(e,i);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,s){t&&this._previousKeyframe.set("easing",t);const r=s&&s.params||{},o=function(e,t){const n=new Map;let s;return e.forEach((e=>{if("*"===e){s??=t.keys();for(let e of s)n.set(e,i)}else for(let[t,s]of e)n.set(t,s)})),n}(e,this._globalTimelineStyles);for(let[e,t]of o){const s=$(t,r,n);this._pendingStyles.set(e,s),this._localTimelineStyles.has(e)||this._backFill.set(e,this._globalTimelineStyles.get(e)??i),this._updateStyle(e,s)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach(((e,t)=>{this._currentKeyframe.set(t,e)})),this._pendingStyles.clear(),this._localTimelineStyles.forEach(((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)})))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach(((e,t)=>{const n=this._styleSummary.get(t);(!n||e.time>n.time)&&this._updateStyle(t,e.value)}))}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach(((r,o)=>{const a=new Map([...this._backFill,...r]);a.forEach(((n,s)=>{"!"===n?e.add(s):n===i&&t.add(s)})),n||a.set("offset",o/this.duration),s.push(a)}));const r=[...e.values()],o=[...t.values()];if(n){const e=s[0],t=new Map(e);e.set("offset",0),t.set("offset",1),s=[e,t]}return ye(this.element,s,r,o,this.duration,this.startTime,this.easing,!1)}}class Te extends Ee{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,n,s,i,r,o=!1){super(e,t,r.delay),this.keyframes=n,this.preStyleProps=s,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:r.duration,delay:r.delay,easing:r.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const i=[],r=n+t,o=t/r,a=new Map(e[0]);a.set("offset",0),i.push(a);const l=new Map(e[0]);l.set("offset",ke(o)),i.push(l);const h=e.length-1;for(let s=1;s<=h;s++){let o=new Map(e[s]);const a=t+o.get("offset")*n;o.set("offset",ke(a/r)),i.push(o)}n=r,t=0,s="",e=i}return ye(this.element,e,this.preStyleProps,this.postStyleProps,n,t,s,!0)}}function ke(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}function De(e,t,n,s,i,r,o,a,l,h,c,u,d){return{type:0,element:e,triggerName:t,isRemovalTransition:i,fromState:n,fromStyles:r,toState:s,toStyles:o,timelines:a,queriedElements:l,preStyleProps:h,postStyleProps:c,totalTime:u,errors:d}}const Ae={};class Me{_triggerName;ast;_stateStyles;constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,s){return function(e,t,n,s,i){return e.some((e=>e(t,n,s,i)))}(this.ast.matchers,e,t,n,s)}buildStyles(e,t,n){let s=this._stateStyles.get("*");return void 0!==e&&(s=this._stateStyles.get(e?.toString())||s),s?s.buildStyles(t,n):new Map}build(e,t,n,s,i,r,o,a,l,h){const c=[],u=this.ast.options&&this.ast.options.params||Ae,d=o&&o.params||Ae,m=this.buildStyles(n,d,c),p=a&&a.params||Ae,y=this.buildStyles(s,p,c),g=new Set,_=new Map,S=new Map,v="void"===s,b={params:Pe(p,u),delay:this.ast.options?.delay},w=h?[]:Se(e,t,this.ast.animation,i,r,m,y,b,l,c);let E=0;return w.forEach((e=>{E=Math.max(e.duration+e.delay,E)})),c.length?De(t,this._triggerName,n,s,v,m,y,[],[],_,S,E,c):(w.forEach((e=>{const n=e.element,s=f(_,n,new Set);e.preStyleProps.forEach((e=>s.add(e)));const i=f(S,n,new Set);e.postStyleProps.forEach((e=>i.add(e))),n!==t&&g.add(n)})),("undefined"==typeof ngDevMode||ngDevMode)&&function(e,t,n){if(!n.validateAnimatableStyleProperty)return;const s=new Set(["easing"]),i=new Set;e.forEach((({keyframes:e})=>{const t=new Map;e.forEach((e=>{const r=Array.from(e.entries()).filter((([e])=>!s.has(e)));for(const[e,s]of r)if(!n.validateAnimatableStyleProperty(e))if(t.has(e)&&!i.has(e)){t.get(e)!==s&&i.add(e)}else t.set(e,s)}))})),i.size>0&&console.warn(`Warning: The animation trigger "${t}" is attempting to animate the following not animatable properties: `+Array.from(i).join(", ")+"\n(to check the list of all animatable properties visit https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_animated_properties)")}(w,this._triggerName,e),De(t,this._triggerName,n,s,v,m,y,w,[...g.values()],_,S,E))}}function Pe(e,t){const n={...t};return Object.entries(e).forEach((([e,t])=>{null!=t&&(n[e]=t)})),n}class Fe{styles;defaultParams;normalizer;constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){const n=new Map,s=Pe(e,this.defaultParams);return this.styles.styles.forEach((e=>{"string"!=typeof e&&e.forEach(((e,i)=>{e&&(e=$(e,s,t));const r=this.normalizer.normalizePropertyName(i,t);e=this.normalizer.normalizeStyleValue(i,r,e,t),n.set(i,e)}))})),n}}class Ce{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,t.states.forEach((e=>{const t=e.options&&e.options.params||{};this.states.set(e.name,new Fe(e.style,t,n))})),Ne(this.states,"true","1"),Ne(this.states,"false","0"),t.transitions.forEach((t=>{this.transitionFactories.push(new Me(e,t,this.states))})),this.fallbackTransition=function(e,t){const n=[(e,t)=>!0],i={type:s.Sequence,steps:[],options:null},r={type:s.Transition,animation:i,matchers:n,options:null,queryCount:0,depCount:0};return new Me(e,r,t)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,s){return this.transitionFactories.find((i=>i.match(e,t,n,s)))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function Ne(e,t,n){e.has(t)?e.has(n)||e.set(n,e.get(t)):e.has(n)&&e.set(t,e.get(n))}const xe=new fe;class Re{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n}register(e,n){const s=[],i=[],r=ce(this._driver,n,s,i);if(s.length)throw function(e){return new t(3503,ngDevMode&&`Unable to build the animation due to the following errors: ${e.map((e=>e.message)).join("\n")}`)}(s);("undefined"==typeof ngDevMode||ngDevMode)&&i.length&&function(e){console.warn(`Animation built with the following warnings:${ne(e)}`)}(i),this._animations.set(e,r)}_buildPlayer(e,t,n){const s=e.element,i=d(this._normalizer,e.keyframes,t,n);return this._driver.animate(s,i,e.duration,e.delay,e.easing,[],!0)}create(e,n,s={}){const r=[],o=this._animations.get(e);let a;const l=new Map;if(o?(a=Se(this._driver,n,o,D,A,new Map,new Map,s,xe,r),a.forEach((e=>{const t=f(l,e.element,new Map);e.postStyleProps.forEach((e=>t.set(e,null)))}))):(r.push(new t(3300,ngDevMode&&"The requested animation doesn't exist or has already been destroyed")),a=[]),r.length)throw function(e){return new t(3504,ngDevMode&&`Unable to create the animation due to the following errors:${e.map((e=>e.message)).join("\n")}`)}(r);l.forEach(((e,t)=>{e.forEach(((n,s)=>{e.set(s,this._driver.computeStyle(t,s,i))}))}));const h=u(a.map((e=>{const t=l.get(e.element);return this._buildPlayer(e,new Map,t)})));return this._playersById.set(e,h),h.onDestroy((()=>this.destroy(e))),this.players.push(h),h}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const n=this._playersById.get(e);if(!n)throw function(e){return new t(3301,ngDevMode&&`Unable to find the timeline player referenced by ${e}`)}(e);return n}listen(e,t,n,s){const i=y(t,"","","");return m(this._getPlayer(e),n,i,s),()=>{}}command(e,t,n,s){if("register"==n)return void this.register(e,s[0]);if("create"==n){const n=s[0]||{};return void this.create(e,t,n)}const i=this._getPlayer(e);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const ze="ng-animate-queued",Ie="ng-animate-disabled",qe=[],Le={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ke={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Be="__ng_removed";class Qe{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value"),s=n?e.value:e;if(this.value=function(e){return null!=e?e:null}(s),n){const{value:t,...n}=e;this.options=n}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const e=this.options.params;Object.keys(t).forEach((n=>{null==e[n]&&(e[n]=t[n])}))}}}const Oe="void",$e=new Qe(Oe);class je{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this._hostClassName="ng-tns-"+e,Je(t,this._hostClassName)}listen(e,n,s,i){if(!this._triggers.has(n))throw function(e,n){return new t(3302,ngDevMode&&`Unable to listen on the animation trigger event "${e}" because the animation trigger "${n}" doesn't exist!`)}(s,n);if(null==s||0==s.length)throw function(e){return new t(3303,ngDevMode&&`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`)}(n);if("start"!=(r=s)&&"done"!=r)throw function(e,n){return new t(3400,ngDevMode&&`The provided animation trigger event "${e}" for the animation trigger "${n}" is not supported!`)}(s,n);var r;const o=f(this._elementListeners,e,[]),a={name:n,phase:s,callback:i};o.push(a);const l=f(this._engine.statesByElement,e,new Map);return l.has(n)||(Je(e,M),Je(e,M+"-"+n),l.set(n,$e)),()=>{this._engine.afterFlush((()=>{const e=o.indexOf(a);e>=0&&o.splice(e,1),this._triggers.has(n)||l.delete(n)}))}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const n=this._triggers.get(e);if(!n)throw function(e){return new t(3401,ngDevMode&&`The provided animation trigger "${e}" has not been registered!`)}(e);return n}trigger(e,t,n,s=!0){const i=this._getTrigger(t),r=new Ve(this.id,t,e);let o=this._engine.statesByElement.get(e);o||(Je(e,M),Je(e,M+"-"+t),this._engine.statesByElement.set(e,o=new Map));let a=o.get(t);const l=new Qe(n,this.id);!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),o.set(t,l),a||(a=$e);if(!(l.value===Oe)&&a.value===l.value){if(!function(e,t){const n=Object.keys(e),s=Object.keys(t);if(n.length!=s.length)return!1;for(let s=0;s<n.length;s++){const i=n[s];if(!t.hasOwnProperty(i)||e[i]!==t[i])return!1}return!0}(a.params,l.params)){const t=[],n=i.matchStyles(a.value,a.params,t),s=i.matchStyles(l.value,l.params,t);t.length?this._engine.reportError(t):this._engine.afterFlush((()=>{L(e,n),q(e,s)}))}return}const h=f(this._engine.playersByElement,e,[]);h.forEach((e=>{e.namespaceId==this.id&&e.triggerName==t&&e.queued&&e.destroy()}));let c=i.matchTransition(a.value,l.value,e,l.params),u=!1;if(!c){if(!s)return;c=i.fallbackTransition,u=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:c,fromState:a,toState:l,player:r,isFallbackTransition:u}),u||(Je(e,ze),r.onStart((()=>{Xe(e,ze)}))),r.onDone((()=>{let t=this.players.indexOf(r);t>=0&&this.players.splice(t,1);const n=this._engine.playersByElement.get(e);if(n){let e=n.indexOf(r);e>=0&&n.splice(e,1)}})),this.players.push(r),h.push(r),r}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach((t=>t.delete(e))),this._elementListeners.forEach(((t,n)=>{this._elementListeners.set(n,t.filter((t=>t.name!=e)))}))}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach((e=>e.destroy())),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,P,!0);n.forEach((e=>{if(e[Be])return;const n=this._engine.fetchNamespacesByElement(e);n.size?n.forEach((n=>n.triggerLeaveAnimation(e,t,!1,!0))):this.clearElementCache(e)})),this._engine.afterFlushAnimationsDone((()=>n.forEach((e=>this.clearElementCache(e)))))}triggerLeaveAnimation(e,t,n,s){const i=this._engine.statesByElement.get(e),r=new Map;if(i){const o=[];if(i.forEach(((t,n)=>{if(r.set(n,t.value),this._triggers.has(n)){const t=this.trigger(e,n,Oe,s);t&&o.push(t)}})),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,r),n&&u(o).onDone((()=>this._engine.processLeaveNode(e))),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const s=new Set;t.forEach((t=>{const i=t.name;if(s.has(i))return;s.add(i);const r=this._triggers.get(i).fallbackTransition,o=n.get(i)||$e,a=new Qe(Oe),l=new Ve(this.id,i,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:i,transition:r,fromState:o,toState:a,player:l,isFallbackTransition:!0})}))}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(n.totalAnimations){const t=n.players.length?n.playersByQueriedElement.get(e):[];if(t&&t.length)s=!0;else{let t=e;for(;t=t.parentNode;){if(n.statesByElement.get(t)){s=!0;break}}}}if(this.prepareLeaveAnimationListeners(e),s)n.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Be];s&&s!==Le||(n.afterFlush((()=>this.clearElementCache(e))),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){Je(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach((n=>{const s=n.player;if(s.destroyed)return;const i=n.element,r=this._elementListeners.get(i);r&&r.forEach((t=>{if(t.name==n.triggerName){const s=y(i,n.triggerName,n.fromState.value,n.toState.value);s._data=e,m(n.player,t.phase,s,t.callback)}})),s.markedForDestroy?this._engine.afterFlush((()=>{s.destroy()})):t.push(n)})),this._queue=[],t.sort(((e,t)=>{const n=e.transition.ast.depCount,s=t.transition.ast.depCount;return 0==n||0==s?n-s:this._engine.driver.containsElement(e.element,t.element)?1:-1}))}destroy(e){this.players.forEach((e=>e.destroy())),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class We{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n}get queuedPlayers(){const e=[];return this._namespaceList.forEach((t=>{t.players.forEach((t=>{t.queued&&e.push(t)}))})),e}createNamespace(e,t){const n=new je(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList,s=this.namespacesByHostElement;if(n.length-1>=0){let i=!1,r=this.driver.getParentElement(t);for(;r;){const t=s.get(r);if(t){const s=n.indexOf(t);n.splice(s+1,0,e),i=!0;break}r=this.driver.getParentElement(r)}i||n.unshift(e)}else n.push(e);return s.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let s=this._namespaceLookup[e];s&&s.register(t,n)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush((()=>{})),this.afterFlushAnimationsDone((()=>{const n=this._fetchNamespace(e);this.namespacesByHostElement.delete(n.hostElement);const s=this._namespaceList.indexOf(n);s>=0&&this._namespaceList.splice(s,1),n.destroy(t),delete this._namespaceLookup[e]})))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n)for(let e of n.values())if(e.namespaceId){const n=this._fetchNamespace(e.namespaceId);n&&t.add(n)}return t}trigger(e,t,n,s){if(Ue(t)){const i=this._fetchNamespace(e);if(i)return i.trigger(t,n,s),!0}return!1}insertNode(e,t,n,s){if(!Ue(t))return;const i=t[Be];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const e=this.collectedLeaveElements.indexOf(t);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const s=this._fetchNamespace(e);s&&s.insertNode(t,n)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Je(e,Ie)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Xe(e,Ie))}removeNode(e,t,n){if(Ue(t)){const s=e?this._fetchNamespace(e):null;s?s.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n);const i=this.namespacesByHostElement.get(t);i&&i.id!==e&&i.removeNode(t,n)}else this._onRemovalComplete(t,n)}markElementAsRemoved(e,t,n,s,i){this.collectedLeaveElements.push(t),t[Be]={namespaceId:e,setForRemoval:s,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:i}}listen(e,t,n,s,i){return Ue(t)?this._fetchNamespace(e).listen(t,n,s,i):()=>{}}_buildInstruction(e,t,n,s,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,s,e.fromState.options,e.toState.options,t,i)}destroyInnerAnimations(e){let t=this.driver.query(e,P,!0);t.forEach((e=>this.destroyActiveAnimationsForElement(e))),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,C,!0),t.forEach((e=>this.finishActiveQueriedAnimationOnElement(e))))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach((e=>{e.queued?e.markedForDestroy=!0:e.destroy()}))}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach((e=>e.finish()))}whenRenderingDone(){return new Promise((e=>{if(this.players.length)return u(this.players).onDone((()=>e()));e()}))}processLeaveNode(e){const t=e[Be];if(t&&t.setForRemoval){if(e[Be]=Le,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Ie)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach((e=>{this.markElementAsDisabled(e,!1)}))}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach(((e,t)=>this._balanceNamespaceList(e,t))),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let e=0;e<this.collectedEnterElements.length;e++){Je(this.collectedEnterElements[e],"ng-star-inserted")}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let e=0;e<n.length;e++)n[e]()}}else for(let e=0;e<this.collectedLeaveElements.length;e++){const t=this.collectedLeaveElements[e];this.processLeaveNode(t)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach((e=>e())),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],t.length?u(t).onDone((()=>{e.forEach((e=>e()))})):e.forEach((e=>e()))}}reportError(e){throw function(e){return new t(3402,ngDevMode&&`Unable to process animations due to the following failed trigger transitions\n ${e.map((e=>e.message)).join("\n")}`)}(e)}_flushAnimations(e,n){const s=new fe,r=[],o=new Map,a=[],l=new Map,h=new Map,c=new Map,d=new Set;this.disabledNodes.forEach((e=>{d.add(e);const t=this.driver.query(e,".ng-animate-queued",!0);for(let e=0;e<t.length;e++)d.add(t[e])}));const m=this.bodyNode,p=Array.from(this.statesByElement.keys()),y=Ze(p,this.collectedEnterElements),g=new Map;let _=0;y.forEach(((e,t)=>{const n=D+_++;g.set(t,n),e.forEach((e=>Je(e,n)))}));const S=[],v=new Set,b=new Set;for(let e=0;e<this.collectedLeaveElements.length;e++){const t=this.collectedLeaveElements[e],n=t[Be];n&&n.setForRemoval&&(S.push(t),v.add(t),n.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach((e=>v.add(e))):b.add(t))}const w=new Map,E=Ze(p,Array.from(v));E.forEach(((e,t)=>{const n=A+_++;w.set(t,n),e.forEach((e=>Je(e,n)))})),e.push((()=>{y.forEach(((e,t)=>{const n=g.get(t);e.forEach((e=>Xe(e,n)))})),E.forEach(((e,t)=>{const n=w.get(t);e.forEach((e=>Xe(e,n)))})),S.forEach((e=>{this.processLeaveNode(e)}))}));const T=[],k=[];for(let e=this._namespaceList.length-1;e>=0;e--){this._namespaceList[e].drainQueuedTransitions(n).forEach((e=>{const t=e.player,n=e.element;if(T.push(t),this.collectedEnterElements.length){const s=n[Be];if(s&&s.setForMove){if(s.previousTriggersValues&&s.previousTriggersValues.has(e.triggerName)){const t=s.previousTriggersValues.get(e.triggerName),n=this.statesByElement.get(e.element);if(n&&n.has(e.triggerName)){const s=n.get(e.triggerName);s.value=t,n.set(e.triggerName,s)}}return void t.destroy()}}const i=!m||!this.driver.containsElement(m,n),o=w.get(n),u=g.get(n),d=this._buildInstruction(e,s,u,o,i);if(d.errors&&d.errors.length)return void k.push(d);if(i)return t.onStart((()=>L(n,d.fromStyles))),t.onDestroy((()=>q(n,d.toStyles))),void r.push(t);if(e.isFallbackTransition)return t.onStart((()=>L(n,d.fromStyles))),t.onDestroy((()=>q(n,d.toStyles))),void r.push(t);const p=[];d.timelines.forEach((e=>{e.stretchStartingKeyframe=!0,this.disabledNodes.has(e.element)||p.push(e)})),d.timelines=p,s.append(n,d.timelines);const y={instruction:d,player:t,element:n};a.push(y),d.queriedElements.forEach((e=>f(l,e,[]).push(t))),d.preStyleProps.forEach(((e,t)=>{if(e.size){let n=h.get(t);n||h.set(t,n=new Set),e.forEach(((e,t)=>n.add(t)))}})),d.postStyleProps.forEach(((e,t)=>{let n=c.get(t);n||c.set(t,n=new Set),e.forEach(((e,t)=>n.add(t)))}))}))}if(k.length){const e=[];k.forEach((n=>{e.push(function(e,n){return new t(3505,ngDevMode&&`@${e} has failed due to:\n ${n.map((e=>e.message)).join("\n- ")}`)}(n.triggerName,n.errors))})),T.forEach((e=>e.destroy())),this.reportError(e)}const M=new Map,P=new Map;a.forEach((e=>{const t=e.element;s.has(t)&&(P.set(t,t),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,M))})),r.forEach((e=>{const t=e.element;this._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach((e=>{f(M,t,[]).push(e),e.destroy()}))}));const F=S.filter((e=>tt(e,h,c))),N=new Map;Ge(N,this.driver,b,c,i).forEach((e=>{tt(e,h,c)&&F.push(e)}));const x=new Map;y.forEach(((e,t)=>{Ge(x,this.driver,new Set(e),h,"!")})),F.forEach((e=>{const t=N.get(e),n=x.get(e);N.set(e,new Map([...t?.entries()??[],...n?.entries()??[]]))}));const R=[],z=[],I={};a.forEach((e=>{const{element:t,player:n,instruction:i}=e;if(s.has(t)){if(d.has(t))return n.onDestroy((()=>q(t,i.toStyles))),n.disabled=!0,n.overrideTotalTime(i.totalTime),void r.push(n);let e=I;if(P.size>1){let n=t;const s=[];for(;n=n.parentNode;){const t=P.get(n);if(t){e=t;break}s.push(n)}s.forEach((t=>P.set(t,e)))}const s=this._buildAnimation(n.namespaceId,i,M,o,x,N);if(n.setRealPlayer(s),e===I)R.push(n);else{const t=this.playersByElement.get(e);t&&t.length&&(n.parentPlayer=u(t)),r.push(n)}}else L(t,i.fromStyles),n.onDestroy((()=>q(t,i.toStyles))),z.push(n),d.has(t)&&r.push(n)})),z.forEach((e=>{const t=o.get(e.element);if(t&&t.length){const n=u(t);e.setRealPlayer(n)}})),r.forEach((e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()}));for(let e=0;e<S.length;e++){const t=S[e],n=t[Be];if(Xe(t,A),n&&n.hasAnimation)continue;let s=[];if(l.size){let e=l.get(t);e&&e.length&&s.push(...e);let n=this.driver.query(t,C,!0);for(let e=0;e<n.length;e++){let t=l.get(n[e]);t&&t.length&&s.push(...t)}}const i=s.filter((e=>!e.destroyed));i.length?Ye(this,t,i):this.processLeaveNode(t)}return S.length=0,R.forEach((e=>{this.players.push(e),e.onDone((()=>{e.destroy();const t=this.players.indexOf(e);this.players.splice(t,1)})),e.play()})),R}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,s,i){let r=[];if(t){const t=this.playersByQueriedElement.get(e);t&&(r=t)}else{const t=this.playersByElement.get(e);if(t){const e=!i||i==Oe;t.forEach((t=>{t.queued||(e||t.triggerName==s)&&r.push(t)}))}}return(n||s)&&(r=r.filter((e=>(!n||n==e.namespaceId)&&(!s||s==e.triggerName)))),r}_beforeAnimationBuild(e,t,n){const s=t.triggerName,i=t.element,r=t.isRemovalTransition?void 0:e,o=t.isRemovalTransition?void 0:s;for(const e of t.timelines){const s=e.element,a=s!==i,l=f(n,s,[]);this._getPreviousPlayers(s,a,r,o,t.toState).forEach((e=>{const t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),l.push(e)}))}L(i,t.fromStyles)}_buildAnimation(e,t,n,s,i,r){const a=t.triggerName,l=t.element,h=[],c=new Set,m=new Set,p=t.timelines.map((t=>{const u=t.element;c.add(u);const p=u[Be];if(p&&p.removedBeforeQueried)return new o(t.duration,t.delay);const y=u!==l,f=function(e){const t=[];return et(e,t),t}((n.get(u)||qe).map((e=>e.getRealPlayer()))).filter((e=>{const t=e;return!!t.element&&t.element===u})),g=i.get(u),_=r.get(u),S=d(this._normalizer,t.keyframes,g,_),v=this._buildPlayer(t,S,f);if(t.subTimeline&&s&&m.add(u),y){const t=new Ve(e,a,u);t.setRealPlayer(v),h.push(t)}return v}));h.forEach((e=>{f(this.playersByQueriedElement,e.element,[]).push(e),e.onDone((()=>function(e,t,n){let s=e.get(t);if(s){if(s.length){const e=s.indexOf(n);s.splice(e,1)}0==s.length&&e.delete(t)}return s}(this.playersByQueriedElement,e.element,e)))})),c.forEach((e=>Je(e,F)));const y=u(p);return y.onDestroy((()=>{c.forEach((e=>Xe(e,F))),q(l,t.toStyles)})),m.forEach((e=>{f(s,e,[]).push(y)})),y}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new o(e.duration,e.delay)}}class Ve{namespaceId;triggerName;element;_player=new o;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach(((t,n)=>{t.forEach((t=>m(e,n,void 0,t)))})),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart((()=>t.triggerCallback("start"))),e.onDone((()=>this.finish())),e.onDestroy((()=>this.destroy()))}_queueEvent(e,t){f(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Ue(e){return e&&1===e.nodeType}function He(e,t){const n=e.style.display;return e.style.display=null!=t?t:"none",n}function Ge(e,t,n,s,i){const r=[];n.forEach((e=>r.push(He(e))));const o=[];s.forEach(((n,s)=>{const r=new Map;n.forEach((e=>{const n=t.computeStyle(s,e,i);r.set(e,n),n&&0!=n.length||(s[Be]=Ke,o.push(s))})),e.set(s,r)}));let a=0;return n.forEach((e=>He(e,r[a++]))),o}function Ze(e,t){const n=new Map;if(e.forEach((e=>n.set(e,[]))),0==t.length)return n;const s=new Set(t),i=new Map;function r(e){if(!e)return 1;let t=i.get(e);if(t)return t;const o=e.parentNode;return t=n.has(o)?o:s.has(o)?1:r(o),i.set(e,t),t}return t.forEach((e=>{const t=r(e);1!==t&&n.get(t).push(e)})),n}function Je(e,t){e.classList?.add(t)}function Xe(e,t){e.classList?.remove(t)}function Ye(e,t,n){u(n).onDone((()=>e.processLeaveNode(t)))}function et(e,t){for(let n=0;n<e.length;n++){const s=e[n];s instanceof a?et(s.players,t):t.push(s)}}function tt(e,t,n){const s=n.get(e);if(!s)return!1;let i=t.get(e);return i?s.forEach((e=>i.add(e))):t.set(e,s),n.delete(e),!0}class nt{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,n){this._driver=t,this._normalizer=n,this._transitionEngine=new We(e.body,t,n),this._timelineEngine=new Re(e.body,t,n),this._transitionEngine.onRemovalComplete=(e,t)=>this.onRemovalComplete(e,t)}registerTrigger(e,n,s,i,r){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const e=[],n=[],s=ce(this._driver,r,e,n);if(e.length)throw function(e,n){return new t(3404,ngDevMode&&`The animation trigger "${e}" has failed to build due to the following errors:\n - ${n.map((e=>e.message)).join("\n - ")}`)}(i,e);("undefined"==typeof ngDevMode||ngDevMode)&&n.length&&function(e,t){console.warn(`The animation trigger "${e}" has built with the following warnings:${ne(t)}`)}(i,n),a=function(e,t,n){return new Ce(e,t,n)}(i,s,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(n,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,s){this._transitionEngine.insertNode(e,t,n,s)}onRemove(e,t,n){this._transitionEngine.removeNode(e,t,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,s){if("@"==n.charAt(0)){const[e,i]=g(n),r=s;this._timelineEngine.command(e,t,i,r)}else this._transitionEngine.trigger(e,t,n,s)}listen(e,t,n,s,i){if("@"==n.charAt(0)){const[e,s]=g(n);return this._timelineEngine.listen(e,t,s,i)}return this._transitionEngine.listen(e,t,n,s,i)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}class st{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,t,n){this._element=e,this._startStyles=t,this._endStyles=n;let s=st.initialStylesByElement.get(e);s||st.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&q(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(q(this._element,this._initialStyles),this._endStyles&&(q(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(st.initialStylesByElement.delete(this._element),this._startStyles&&(L(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(L(this._element,this._endStyles),this._endStyles=null),q(this._element,this._initialStyles),this._state=3)}}function it(e){let t=null;return e.forEach(((e,n)=>{(function(e){return"display"===e||"position"===e})(n)&&(t=t||new Map,t.set(n,e))})),t}class rt{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,n,s){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=s,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach((e=>e())),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy((()=>{this.domPlayer.removeEventListener("finish",t)}))}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach((e=>{t.push(Object.fromEntries(e))})),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach((e=>e())),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach((e=>e())),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;if(this.hasStarted()){this._finalKeyframe.forEach(((t,n)=>{"offset"!==n&&e.set(n,this._finished?t:G(this.element,n))}))}this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach((e=>e())),t.length=0}}class ot{validateStyleProperty(e){return"undefined"!=typeof ngDevMode&&!ngDevMode||w(e)}validateAnimatableStyleProperty(e){if("undefined"==typeof ngDevMode||ngDevMode){return E(V(e))}return!0}containsElement(e,t){return T(e,t)}getParentElement(e){return S(e)}query(e,t,n){return k(e,t,n)}computeStyle(e,t,n){return G(e,t)}animate(e,t,n,s,i,r=[]){const o={duration:n,delay:s,fill:0==s?"both":"forwards"};i&&(o.easing=i);const a=new Map,l=r.filter((e=>e instanceof rt));U(n,s)&&l.forEach((e=>{e.currentSnapshot.forEach(((e,t)=>a.set(t,e)))}));let h=z(t).map((e=>new Map(e)));h=function(e,t,n){if(n.size&&t.length){let s=t[0],i=[];if(n.forEach(((e,t)=>{s.has(t)||i.push(t),s.set(t,e)})),i.length)for(let n=1;n<t.length;n++){let s=t[n];i.forEach((t=>s.set(t,G(e,t))))}}return t}(e,h,a);const c=function(e,t){let n=null,s=null;return Array.isArray(t)&&t.length?(n=it(t[0]),t.length>1&&(s=it(t[t.length-1]))):t instanceof Map&&(n=it(t)),n||s?new st(e,n,s):null}(e,h);return new rt(e,h,o,c)}}function at(e,t){return"noop"===e?new nt(t,new Z,new Y):new nt(t,new ot,new te)}class lt{_driver;_animationAst;constructor(e,n){this._driver=e;const s=[],i=[],r=ce(e,n,s,i);if(s.length)throw function(e){return new t(3500,ngDevMode&&`animation validation failed:\n${e.map((e=>e.message)).join("\n")}`)}(s);("undefined"==typeof ngDevMode||ngDevMode)&&i.length&&function(e){console.warn(`animation validation warnings:${ne(e)}`)}(i),this._animationAst=r}buildTimelines(e,n,s,i,r){const o=Array.isArray(n)?I(n):n,a=Array.isArray(s)?I(s):s,l=[];r=r||new fe;const h=Se(this._driver,e,this._animationAst,D,A,o,a,i,r,l);if(l.length)throw function(e){return new t(3501,ngDevMode&&`animation building failed:\n${e.map((e=>e.message)).join("\n")}`)}(l);return h}}const ht="@",ct="@.disabled";class ut{namespaceId;delegate;engine;_onDestroy;"Éµtype"=0;constructor(e,t,n,s){this.namespaceId=e,this.delegate=t,this.engine=n,this._onDestroy=s}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone((()=>{queueMicrotask((()=>{this.delegate.destroy()}))})),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,s=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,n){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,s){this.delegate.setAttribute(e,t,n,s)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,s){this.delegate.setStyle(e,t,n,s)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==ht&&t==ct?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n,s){return this.delegate.listen(e,t,n,s)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class dt extends ut{factory;constructor(e,t,n,s,i){super(t,n,s,i),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==ht?"."==t.charAt(1)&&t==ct?(n=void 0===n||!!n,this.disableAnimations(e,n)):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n,s){if(t.charAt(0)==ht){const s=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let i=t.slice(1),r="";return i.charAt(0)!=ht&&([i,r]=function(e){const t=e.indexOf("."),n=e.substring(0,t),s=e.slice(t+1);return[n,s]}(i)),this.engine.listen(this.namespaceId,s,i,r,(e=>{const t=e._data||-1;this.factory.scheduleListenerCallback(t,n,e)}))}return this.delegate.listen(e,t,n,s)}}class mt{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,t.onRemovalComplete=(e,t)=>{t?.removeChild(null,e)}}createRenderer(e,t){const n=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){const e=this._rendererCache;let t=e.get(n);if(!t){const s=()=>e.delete(n);t=new ut("",n,this.engine,s),e.set(n,t)}return t}const s=t.id,i=t.id+"-"+this._currentId;this._currentId++,this.engine.register(i,e);const r=t=>{Array.isArray(t)?t.forEach(r):this.engine.registerTrigger(s,i,e,t.name,t)};return t.data.animation.forEach(r),new dt(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask((()=>{this._microtaskId++}))}scheduleListenerCallback(e,t,n){if(e>=0&&e<this._microtaskId)return void this._zone.run((()=>t(n)));const s=this._animationCallbacksBuffer;0==s.length&&queueMicrotask((()=>{this._zone.run((()=>{s.forEach((e=>{const[t,n]=e;t(n)})),this._animationCallbacksBuffer=[]}))})),s.push([t,n])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular((()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)})),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}}export{J as AnimationDriver,Z as NoopAnimationDriver,lt as ÉµAnimation,nt as ÉµAnimationEngine,dt as ÉµAnimationRenderer,mt as ÉµAnimationRendererFactory,X as ÉµAnimationStyleNormalizer,ut as ÉµBaseAnimationRenderer,Y as ÉµNoopAnimationStyleNormalizer,ot as ÉµWebAnimationsDriver,rt as ÉµWebAnimationsPlayer,te as ÉµWebAnimationsStyleNormalizer,U as ÉµallowPreviousPlayerStylesMerge,V as ÉµcamelCaseToDashCase,T as ÉµcontainsElement,at as ÉµcreateEngine,S as ÉµgetParentElement,k as ÉµinvokeQuery,z as ÉµnormalizeKeyframes,w as ÉµvalidateStyleProperty,E as ÉµvalidateWebAnimatableStyleProperty};export default null;
