/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/@taiga-ui/core@4.36.0/fesm2022/taiga-ui-core-services.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as e from"@angular/core";import{inject as t,Injectable as r,LOCALE_ID as s,NgZone as o}from"@angular/core";import{tuiZoneOptimized as i,tuiZonefree as n}from"@taiga-ui/cdk/observables";import{TUI_WINDOW_SIZE as a,TUI_IS_WEBKIT as c}from"@taiga-ui/cdk/tokens";import{TUI_MEDIA as m}from"@taiga-ui/core/tokens";import{Observable as p,map as l,distinctUntilChanged as g,shareReplay as d,fromEvent as u,startWith as h,of as v,finalize as f}from"rxjs";import{WA_WINDOW as I,WA_ANIMATION_FRAME as y}from"@ng-web-apis/common";import{EMPTY_CLIENT_RECT as b}from"@taiga-ui/cdk/constants";import{tuiInjectElement as V}from"@taiga-ui/cdk/utils/dom";import{TuiPositionAccessor as D}from"@taiga-ui/core/classes";class j extends p{constructor(){super((e=>this.stream$.subscribe(e))),this.media=t(m),this.sorted=Object.values(this.media).sort(((e,t)=>e-t)),this.invert=Object.keys(this.media).reduce(((e,t)=>({...e,[this.media[t]]:t})),{}),this.stream$=t(a).pipe(l((({width:e})=>this.sorted.find((t=>t>e)))),l((e=>this.invert[e||this.sorted[this.sorted.length-1]||0]??null)),g(),i(),d({bufferSize:1,refCount:!0}))}static{this.ɵfac=e.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:j,deps:[],target:e.ɵɵFactoryTarget.Injectable})}static{this.ɵprov=e.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:j,providedIn:"root"})}}e.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:j,decorators:[{type:r,args:[{providedIn:"root"}]}],ctorParameters:function(){return[]}});class k extends p{constructor(){const e=t(I).matchMedia("(prefers-color-scheme: dark)"),r=u(e,"change").pipe(h(null),l((()=>e.matches)),d({bufferSize:1,refCount:!0}));super((e=>r.subscribe(e)))}static{this.ɵfac=e.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:k,deps:[],target:e.ɵɵFactoryTarget.Injectable})}static{this.ɵprov=e.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:k,providedIn:"root"})}}e.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:k,decorators:[{type:r,args:[{providedIn:"root"}]}],ctorParameters:function(){return[]}});class F{constructor(){this.locale=t(s)}format(e){return v(new Date(e).toLocaleTimeString(this.locale,{hour:"numeric",minute:"2-digit"}))}static{this.ɵfac=e.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:F,deps:[],target:e.ɵɵFactoryTarget.Injectable})}static{this.ɵprov=e.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:F,providedIn:"root"})}}e.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:F,decorators:[{type:r,args:[{providedIn:"root"}]}]});class w extends p{constructor(){const e=t(y),r=t(o);super((t=>e.pipe(h(null),l((()=>this.accessor.getPosition(this.el.getBoundingClientRect(),this.el))),n(r),f((()=>this.accessor.getPosition(b)))).subscribe(t))),this.el=V(),this.accessor=t(D)}static{this.ɵfac=e.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:w,deps:[],target:e.ɵɵFactoryTarget.Injectable})}static{this.ɵprov=e.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:w})}}e.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:w,decorators:[{type:r}],ctorParameters:function(){return[]}});class C{constructor(){this.isWebkit=t(c),this.win=t(I)}correct(e){return this.isWebkit?[e[0]+(this.win.visualViewport?.offsetTop??0),e[1]+(this.win.visualViewport?.offsetLeft??0)]:e}static{this.ɵfac=e.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:C,deps:[],target:e.ɵɵFactoryTarget.Injectable})}static{this.ɵprov=e.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:C,providedIn:"root"})}}e.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:C,decorators:[{type:r,args:[{providedIn:"root"}]}]});export{j as TuiBreakpointService,k as TuiDarkThemeService,F as TuiFormatDateService,w as TuiPositionService,C as TuiVisualViewportService};export default null;
