/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/@taiga-ui/addon-table@4.36.0/fesm2022/taiga-ui-addon-table-directives-table-filters.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as e from"@angular/core";import{Directive as t,Input as r,inject as i,Pipe as s}from"@angular/core";import{TUI_TRUE_HANDLER as a}from"@taiga-ui/cdk/constants";import{tuiProvide as n}from"@taiga-ui/cdk/utils/miscellaneous";import{NgControl as o}from"@angular/forms";import{TuiTableHead as l}from"@taiga-ui/addon-table/components";import{ReplaySubject as c,switchMap as p,identity as m,startWith as g,map as h,merge as u,defer as f,EMPTY as d,distinctUntilChanged as y}from"rxjs";class v{}class F extends v{constructor(){super(...arguments),this.filter=a}static{this.ɵfac=e.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:F,deps:null,target:e.ɵɵFactoryTarget.Directive})}static{this.ɵdir=e.ɵɵngDeclareDirective({minVersion:"14.0.0",version:"16.2.12",type:F,isStandalone:!0,selector:"[tuiGenericFilter]",inputs:{filter:["tuiGenericFilter","filter"]},providers:[n(v,F)],usesInheritance:!0,ngImport:e})}}e.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:F,decorators:[{type:t,args:[{standalone:!0,selector:"[tuiGenericFilter]",providers:[n(v,F)]}]}],propDecorators:{filter:[{type:r,args:["tuiGenericFilter"]}]}});class D{constructor(){this.refresh$=new c(1),this.filters=[]}register(e){this.filters=this.filters.concat(e),this.update()}unregister(e){this.filters=this.filters.filter((t=>t!==e)),this.update()}filter(e){return this.refresh$.pipe(p(m),g(null),h((()=>e.filter((e=>this.check(e))))))}check(e){return this.filters.every((t=>t.filter(e)))}update(){this.refresh$.next(u(...this.filters.map((({refresh$:e})=>e))))}static{this.ɵfac=e.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:D,deps:[],target:e.ɵɵFactoryTarget.Directive})}static{this.ɵdir=e.ɵɵngDeclareDirective({minVersion:"14.0.0",version:"16.2.12",type:D,isStandalone:!0,selector:"[tuiTableFilters]",ngImport:e})}}e.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:D,decorators:[{type:t,args:[{standalone:!0,selector:"[tuiTableFilters]"}]}]});class I{constructor(){this.head=i(l,{optional:!0}),this.delegate=i(v),this.control=i(o),this.filters=i(D),this.refresh$=f((()=>u(this.control.valueChanges||d,this.control.statusChanges?.pipe(y())||d)))}ngOnInit(){this.filters.register(this)}ngOnDestroy(){this.filters.unregister(this)}filter(e){const{disabled:t,value:r}=this.control;return!!t||!this.key||this.delegate.filter(e[this.key],r)}get key(){return this.tuiTableFilter||this.head?.tuiHead}static{this.ɵfac=e.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:I,deps:[],target:e.ɵɵFactoryTarget.Directive})}static{this.ɵdir=e.ɵɵngDeclareDirective({minVersion:"14.0.0",version:"16.2.12",type:I,isStandalone:!0,selector:"[tuiTableFilter]",inputs:{tuiTableFilter:"tuiTableFilter"},ngImport:e})}}e.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:I,decorators:[{type:t,args:[{standalone:!0,selector:"[tuiTableFilter]"}]}],propDecorators:{tuiTableFilter:[{type:r}]}});class T{constructor(){this.filters=i(D)}transform(e){return this.filters.filter(e)}static{this.ɵfac=e.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:T,deps:[],target:e.ɵɵFactoryTarget.Pipe})}static{this.ɵpipe=e.ɵɵngDeclarePipe({minVersion:"14.0.0",version:"16.2.12",ngImport:e,type:T,isStandalone:!0,name:"tuiTableFilters"})}}e.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:e,type:T,decorators:[{type:s,args:[{standalone:!0,name:"tuiTableFilters"}]}]});const b=[D,I,T,F];export{v as AbstractTuiTableFilter,F as TuiGenericFilter,I as TuiTableFilterDirective,b as TuiTableFilters,D as TuiTableFiltersDirective,T as TuiTableFiltersPipe};export default null;
