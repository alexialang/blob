/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/@taiga-ui/event-plugins@4.5.1/fesm2022/taiga-ui-event-plugins.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{EVENT_MANAGER_PLUGINS as e}from"@angular/platform-browser";import{DOCUMENT as t}from"@angular/common";import*as n from"@angular/core";import{InjectionToken as r,inject as s,Injectable as i}from"@angular/core";class a extends CustomEvent{constructor(e,{clientX:t,clientY:n,...r}){super(e,{...r,detail:{clientX:t,clientY:n}})}}const o="undefined"==typeof navigator?null:navigator;class c{supports(e){return this.regExp.test(e)}getDelay(e){const t=this.regExp.exec(e);if(!t?.groups)throw new Error(`Invalid event: ${e}`);const{time:n,units:r}=t.groups;switch(r){case"ms":return Number(n);case"s":return 1e3*Number(n);default:throw new Error(`Invalid event: ${e}`)}}unwrap(e){return e.replace(this.regExp,"")}}class l extends c{constructor(){super(...arguments),this.regExp=/\.debounce~(?<time>\d+)(?<units>ms|s)/}addEventListener(e,t,n){let r;const s=this.manager.addEventListener(e,this.unwrap(t),(e=>{clearTimeout(r),r=setTimeout((()=>{n(e)}),this.getDelay(t))}));return()=>{clearTimeout(r),s()}}}class p{supports(e){return e.includes(this.modifier)}unwrap(e){return e.split(".").filter((e=>!this.modifier.includes(e))).join(".")}}const u=new r(ngDevMode?"[GLOBAL_HANDLER]: Global event target handler":"",{factory:()=>{const e=s(t);return t=>"body"===t?e.body:e.defaultView[t]||e.createElement("div")}});class d extends p{constructor(){super(...arguments),this.handler=s(u),this.modifier=">"}addEventListener(e,t,n){return this.manager.addEventListener(this.handler(t.split(">")[0]),t.split(">")?.[1]??"",n)}static{this.ɵfac=n.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:d,deps:null,target:n.ɵɵFactoryTarget.Injectable})}static{this.ɵprov=n.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:d})}}n.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:d,decorators:[{type:i}]});class m extends p{constructor(){super(...arguments),this.modifier="capture.once.passive"}supports(e){return e.includes(".")&&!this.unwrap(e).includes(".")}addEventListener(e,t,n){const r=this.unwrap(t),s=t.includes(".capture");return e.addEventListener(r,n,{capture:s,once:t.includes(".once"),passive:t.includes(".passive")}),()=>e.removeEventListener(r,n,{capture:s})}static{this.ɵfac=n.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:m,deps:null,target:n.ɵɵFactoryTarget.Injectable})}static{this.ɵprov=n.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:m})}}n.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:m,decorators:[{type:i}]});class g extends p{constructor(){super(...arguments),this.modifier=".prevent"}addEventListener(e,t,n){return this.manager.addEventListener(e,this.unwrap(t),(e=>{e.preventDefault(),n(e)}))}static{this.ɵfac=n.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:g,deps:null,target:n.ɵɵFactoryTarget.Injectable})}static{this.ɵprov=n.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:g})}}n.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:g,decorators:[{type:i}]});class v extends p{constructor(){super(...arguments),this.modifier="resize"}supports(e){return"resize"===e}addEventListener(e,t,n){if("undefined"==typeof ResizeObserver||!(e instanceof Element))return e.addEventListener(t,n),()=>e.removeEventListener(t,n);const r=new ResizeObserver(n);return r.observe(e),()=>r.disconnect()}static{this.ɵfac=n.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:v,deps:null,target:n.ɵɵFactoryTarget.Injectable})}static{this.ɵprov=n.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:v})}}n.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:v,decorators:[{type:i}]});class h extends p{constructor(){super(...arguments),this.modifier=".self"}addEventListener(e,t,n){return this.manager.addEventListener(e,this.unwrap(t),(e=>{e.target===e.currentTarget&&n(e)}))}static{this.ɵfac=n.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:h,deps:null,target:n.ɵɵFactoryTarget.Injectable})}static{this.ɵprov=n.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:h})}}n.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:h,decorators:[{type:i}]});class y extends p{constructor(){super(...arguments),this.modifier=".silent"}addEventListener(e,t,n){return y.ngZone=this.manager.getZone(),y.ngZone.runOutsideAngular((()=>this.manager.addEventListener(e,this.unwrap(t),n)))}static{this.ɵfac=n.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:y,deps:null,target:n.ɵɵFactoryTarget.Injectable})}static{this.ɵprov=n.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:y})}}n.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:y,decorators:[{type:i}]});class E extends p{constructor(){super(...arguments),this.modifier=".stop"}addEventListener(e,t,n){return this.manager.addEventListener(e,this.unwrap(t),(e=>{e.stopPropagation(),n(e)}))}static{this.ɵfac=n.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:E,deps:null,target:n.ɵɵFactoryTarget.Injectable})}static{this.ɵprov=n.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:E})}}n.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:E,decorators:[{type:i}]});class f extends y{constructor(){super(...arguments),this.modifier=".zoneless"}static{this.ɵfac=n.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:f,deps:null,target:n.ɵɵFactoryTarget.Injectable})}static{this.ɵprov=n.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:f})}}n.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:n,type:f,decorators:[{type:i}]});const I=[y,f,d,m,g,v,h,E,class{constructor(){this.isIOS=!!o&&(({userAgent:e,maxTouchPoints:t})=>/ipad|iphone|ipod/i.test(e)||/^((?!chrome|android).)*safari/i.test(e)&&t>1)(o)}addEventListener(e,t,n){const r=this.isIOS?this.listenTouchEvents(e):this.listenContextmenuEvent(e);return e.addEventListener("longtap",n),()=>{r(),e.removeEventListener("longtap",n)}}supports(e){return"longtap"===e}listenContextmenuEvent(e){return this.manager.addEventListener(e,"contextmenu.prevent.stop",(({clientX:t,clientY:n})=>{this.dispatchLongtapEvent(e,t,n)}))}listenTouchEvents(e){let t=null,n=null;const r=()=>{clearTimeout(t),n=null,t=null},s=this.manager.addEventListener(e,"touchstart.zoneless.passive",(({touches:s})=>{const i=s[0];if(!i)return;const{clientX:a,clientY:o}=i;n={clientX:a,clientY:o},t=setTimeout((()=>{this.dispatchLongtapEvent(e,a,o),r()}),700)})),i=this.manager.addEventListener(e,"touchmove.zoneless.passive",(({touches:e})=>{const t=e[0];if(!t||!n)return;const{clientX:s,clientY:i}=t;Math.hypot(s-n.clientX,i-n.clientY)<=15||r()})),a=this.manager.addEventListener(e,"touchcancel.zoneless.passive",r),o=this.manager.addEventListener(e,"touchend.zoneless.passive",r);return()=>{s(),i(),a(),o()}}dispatchLongtapEvent(e,t,n){e.dispatchEvent(new a("longtap",{clientX:t,clientY:n,bubbles:!1,cancelable:!1,composed:!1}))}},l,class extends c{constructor(){super(...arguments),this.regExp=/\.throttle~(?<time>\d+)(?<units>ms|s)/}addEventListener(e,t,n){let r;const s=this.manager.addEventListener(e,this.unwrap(t),(e=>{void 0===r&&(n(e),r=setTimeout((()=>{r=void 0}),this.getDelay(t)))}));return()=>{clearTimeout(r),s()}}}].map((t=>({provide:e,multi:!0,useClass:t})));function L(){return I}function b(e){return(t,n,r)=>{const{value:s}=r;r.value=function(...t){e.apply(this,t)&&(y.ngZone?y.ngZone.run((()=>s.apply(this,t))):s.apply(this,t))}}}function D(e){return e}export{l as DebounceEventPlugin,u as GLOBAL_HANDLER,d as GlobalEventPlugin,I as NG_EVENT_PLUGINS,m as OptionsEventPlugin,g as PreventEventPlugin,v as ResizePlugin,y as SilentEventPlugin,E as StopEventPlugin,D as asCallable,L as provideEventPlugins,b as shouldCall};export default null;
