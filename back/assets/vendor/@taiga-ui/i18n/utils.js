/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/@taiga-ui/i18n@4.36.0/fesm2022/taiga-ui-i18n-utils.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as t from"@angular/core";import{inject as e,Injectable as r}from"@angular/core";import{TUI_DEFAULT_LANGUAGE as o,TUI_LANGUAGE_LOADER as n,TUI_LANGUAGE_STORAGE_KEY as a,TUI_LANGUAGE as s}from"@taiga-ui/i18n/tokens";import{BehaviorSubject as i,of as p,map as m,from as c,switchAll as l}from"rxjs";import{WA_LOCAL_STORAGE as u}from"@ng-web-apis/common";function g(t){return()=>e(s).pipe(m((e=>e[t])))}function h(t,e){return c(async function(t){return t.then((t=>t.default||t))}(e(t))).pipe(m((e=>e?.[`TUI_${t.toUpperCase()}_LANGUAGE`])))}function f(t,e,r){return t&&e?h(t,e):p(r)}function d(t){return[{provide:n,useFactory:()=>t},{provide:s,useFactory:()=>e(y).pipe(l())}]}class y extends i{constructor(){super(f(e(u).getItem(e(a)),e(n,{optional:!0}),e(o))),this.fallback=e(o),this.key=e(a),this.storage=e(u),this.loader=e(n,{optional:!0})}get language(){return this.storage.getItem(this.key)||this.fallback.name}setLanguage(t){this.storage.setItem(this.key,t),this.next(f(t,this.loader,this.fallback))}clear(){this.storage.removeItem(this.key),this.next(p(this.fallback))}static{this.ɵfac=t.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:t,type:y,deps:[],target:t.ɵɵFactoryTarget.Injectable})}static{this.ɵprov=t.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"16.2.12",ngImport:t,type:y,providedIn:"root"})}}t.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:t,type:y,decorators:[{type:r,args:[{providedIn:"root"}]}],ctorParameters:function(){return[]}});export{y as TuiLanguageSwitcherService,f as tuiAsyncLoadLanguage,g as tuiExtractI18n,d as tuiLanguageSwitcher,h as tuiLoadLanguage};export default null;
