/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/@taiga-ui/cdk@4.36.0/fesm2022/taiga-ui-cdk-services.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as t from"@angular/core";import{Injectable as e,inject as r,INJECTOR as o,NgZone as n}from"@angular/core";import{tuiCreateTokenFromFactory as s,tuiProvide as i}from"@taiga-ui/cdk/utils";import{PolymorpheusComponent as a}from"@taiga-ui/polymorpheus";import{Observable as c,of as m,defer as p,switchMap as l,map as g,takeUntil as u,timer as d,endWith as h,tap as v}from"rxjs";import{WA_PERFORMANCE as f,WA_ANIMATION_FRAME as y}from"@ng-web-apis/common";import{tuiZonefreeScheduler as I}from"@taiga-ui/cdk/observables";import{tuiClamp as D}from"@taiga-ui/cdk/utils/math";import{tuiEaseInOutQuad as b}from"@taiga-ui/cdk/utils/miscellaneous";import{DOCUMENT as V}from"@angular/common";import{Meta as $}from"@angular/platform-browser";class F{static{this.autoId=0}generate(){return`tui_${F.autoId++}${Date.now()}`}static{this.ɵfac=t.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:t,type:F,deps:[],target:t.ɵɵFactoryTarget.Injectable})}static{this.ɵprov=t.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"16.2.12",ngImport:t,type:F,providedIn:"root"})}}function j(){return r(F).generate()}t.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:t,type:F,decorators:[{type:e,args:[{providedIn:"root"}]}]});class T{constructor(t,e,n={}){this.options=n,this.id=r(F),this.component=new a(e,r(o)),this.items$=r(t)}open(t,e={}){return new c((r=>{const o={...this.options,...e,content:t,$implicit:r,component:this.component,createdAt:Date.now(),id:this.id.generate(),completeWith:t=>{r.next(t),r.complete()}};return this.items$.next([...this.items$.value,o]),()=>{this.items$.next(this.items$.value.filter((t=>t!==o)))}}))}static{this.ɵfac=t.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:t,type:T,deps:"invalid",target:t.ɵɵFactoryTarget.Injectable})}static{this.ɵprov=t.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"16.2.12",ngImport:t,type:T})}}function w(t){return i(T,t)}t.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:t,type:T,decorators:[{type:e}],ctorParameters:function(){return[{type:void 0},{type:void 0},{type:void 0}]}});function M(t){return"scrollX"in t?t.scrollX:t.scrollLeft}class x{constructor(){this.performanceRef=r(f),this.animationFrame$=r(y),this.zone=r(n)}scroll$(t,e,r=M(t),o=300){ngDevMode&&console.assert(o>=0,"duration cannot be negative"),ngDevMode&&console.assert(e>=0,"scrollTop cannot be negative"),ngDevMode&&console.assert(r>=0,"scrollLeft cannot be negative");const n=function(t){return"scrollY"in t?t.scrollY:t.scrollTop}(t),s=M(t),i=e-n,a=r-s;return(o?p((()=>m(this.performanceRef.now()))).pipe(l((t=>this.animationFrame$.pipe(g((e=>e-t))))),g((t=>b(D(t/o,0,1)))),g((t=>[n+i*t,s+a*t])),u(d(o,I(this.zone))),h([e,r])):m([e,r])).pipe(v((([e,r])=>{t.scrollTo?.(r,e)})))}static{this.ɵfac=t.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:t,type:x,deps:[],target:t.ɵɵFactoryTarget.Injectable})}static{this.ɵprov=t.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"16.2.12",ngImport:t,type:x,providedIn:"root"})}}t.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:t,type:x,decorators:[{type:e,args:[{providedIn:"root"}]}]});const k=s((()=>r($).getTag('name="theme-color"')?.content??""));class C{constructor(){this.current=r(k),this.doc=r(V),this.meta=r($),this.color=this.current}get color(){return this.current}set color(t){this.current=t,this.meta.updateTag({name:"theme-color",content:t}),this.doc.documentElement.style.setProperty("--tui-theme-color",t)}static{this.ɵfac=t.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"16.2.12",ngImport:t,type:C,deps:[],target:t.ɵɵFactoryTarget.Injectable})}static{this.ɵprov=t.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"16.2.12",ngImport:t,type:C,providedIn:"root"})}}t.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"16.2.12",ngImport:t,type:C,decorators:[{type:e,args:[{providedIn:"root"}]}],ctorParameters:function(){return[]}});export{k as TUI_THEME_COLOR,F as TuiIdService,T as TuiPopoverService,x as TuiScrollService,C as TuiThemeColorService,w as tuiAsPopover,j as tuiInjectId};export default null;
